# AWS Lambda function to use AWS Route 53 as dyndns provider

The intended usage for this function is to provide a simple DDNS solution
for your domain hosted on AWS Route 53. Just make your router / DDNS client call
the API gateway endpoint on each IP address change.

This Lambda function is based on version 0.0.1 of [Chalice](https://github.com/awslabs/chalice),
which is a micro framework for AWS Lambda in python.

Unfortunately, Chalice does currently not support external modules or config
files. Therefore, you need to adapt your configuration directly in app.py.

## Usage

First, install dependencies in a local virtualenv for deployment on AWS:

```bash
virtualenv -p python2 venv
source venv/bin/activate
pip install -r requirements.txt
```

Enter your AWS credentials in ~/.aws/config, as required by acs-cli or boto.
If you have not set up proper AWS access keys yet, do that first. There are
plenty of tutorials in the net on how to do that.

Make sure to change ZoneId and Hostname in the config section of app.py.

Then deploy to AWS:

```
chalice deploy
```

On the first run, chalice will tell you the autogenerated policy for the function
and the API gateway URL where the function is reachable.

Use this URL in your DynDNS client.


## Missing features and security considerations

- The function provides no authentication. Currently the security of the solution
depends on nobody knowing the URL of the function.
- The autogenerated policy of Chalice allows the function to update all resource
records in your zone. This could be more restricted
- Proper error handling would be nice
